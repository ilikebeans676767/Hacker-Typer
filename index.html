<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Elements - Google Chrome</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    html, body {
      height: 100%; margin: 0; padding: 0;
      background: #181818; color: #cfcfcf;
      font-family: "Menlo", "Consolas", "Monaco", "Courier New", monospace;
      overflow: hidden;
    }
    body { height: 100vh; width: 100vw; }
    .toolbar { display: flex; background: #222; color: #bbb; border-bottom: 1px solid #343434; font-size: 13px; user-select: none; }
    .toolbar .tab { padding: 8px 16px; border-right: 1px solid #343434; cursor: pointer; }
    .toolbar .tab.active { background: #181818; color: #fff; }
    .main-wrapper { display: flex; height: calc(100vh - 39px); min-height: 0; width: 100vw; }
    .left-section { display: flex; flex-direction: row; flex: none; min-width: 0; min-height: 0; position: relative; background: #23272e; width: 60%; transition: width 0.2s; box-sizing: border-box; }
    .gutter { color: #4b5363; background: #23272e; padding-right: 10px; text-align: right; user-select: none; min-width: 30px; overflow-y: auto; box-sizing: border-box; }
    .panel { display: none; flex: 1; min-width: 0; min-height: 0; overflow-y: auto; overflow-x: auto; white-space: pre-wrap; line-height: 1.5; border-left: 1px solid #333; box-sizing: border-box; padding: 18px; font-size: 14px; background: #1e1e1e; }
    .panel.active { display: block; }
    #console { background: #191A1C; color: #21eb1a; border-left: 1px solid #333; font-size: 14px; overflow-y: auto; min-height: 0; box-sizing: border-box; display: block; padding: 18px; font-family: "Menlo", "Consolas", "Monaco", "Courier New", monospace; min-width: 100px; width: 40%; transition: width 0.2s; }
    /* Syntax highlighting */
    .token.comment { color: #6a9955; }
    .token.tag { color: #569cd6; }
    .token.attr { color: #9cdcfe; }
    .token.value { color: #ce9178; }
    .token.angle { color: #808080; }
    .token.doctype { color: #6a9955; }
    .selected-line { background: rgba(86,156,214,0.15); outline: 1px solid #569cd6; }
    /* Collapsible tree */
    .tree-line { white-space: pre; display: flex; align-items: center; }
    .tree-arrow { width: 14px; display: inline-block; cursor: pointer; color: #bbb; margin-right: 4px; user-select: none; }
    .tree-arrow.invisible { visibility: hidden; }
    .collapsed > .tree-children { display: none; }
    .tree-children { margin-left: 22px; }
    .resizer { width: 6px; background: #262b34; cursor: col-resize; position: relative; z-index: 10; transition: background 0.2s; }
    .resizer:hover, .resizer.dragging { background: #3e8fde; }
    table { width: 100%; border-collapse: collapse; font-size: 14px; color: #cfcfcf; }
    th, td { border-bottom: 1px solid #333; padding: 3px 6px; }
    th { color: #7abaff; font-weight: bold; background: #23272e; }
    ul { padding-left: 20px; }
    strong { color: #00ced1; }
    pre { white-space: pre-wrap; }
  </style>
  <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>
  <div class="toolbar">
    <div class="tab active" data-panel="elements">Elements</div>
    <div class="tab" data-panel="consolefaux">Console</div>
    <div class="tab" data-panel="sources">Sources</div>
    <div class="tab" data-panel="network">Network</div>
    <div class="tab" data-panel="performance">Performance</div>
    <div class="tab" data-panel="memory">Memory</div>
    <div class="tab" data-panel="application">Application</div>
    <div class="tab" data-panel="security">Security</div>
    <div class="tab" data-panel="lighthouse">Lighthouse</div>
  </div>
  <div class="main-wrapper">
    <div class="left-section">
      <div class="gutter" id="gutter"></div>
      <!-- Elements Panel (new version with code lines & collapsible tree) -->
      <div class="panel elements active" id="elements">
        <!-- Tree lines generated by JS -->
        <div id="elements-tree"></div>
      </div>
      <div class="panel" id="consolefaux">
        &gt; let version = "1.26.4"<br>
        &lt; "1.26.4"<br>
        &gt; document.querySelectorAll("div").length<br>
        &lt; 16<br>
        &gt; console.warn("Low memory warning!")<br>
        VM12:1 Low memory warning!
      </div>
      <div class="panel" id="sources">
        <strong>Page sources:</strong>
        <ul>
          <li>index.html</li>
          <li>styles.css</li>
          <li>main.js</li>
        </ul>
        <p>// main.js (truncated preview)</p>
        <pre>function hack() {
  return "all your base are belong to us";
}</pre>
      </div>
      <div class="panel" id="network">
        <strong>Network Log:</strong>
        <table>
          <tr><th>Name</th><th>Status</th><th>Type</th></tr>
          <tr><td>main.js</td><td>200</td><td>script</td></tr>
          <tr><td>logo.png</td><td>200</td><td>image</td></tr>
          <tr><td>api/data</td><td>404</td><td>xhr</td></tr>
        </table>
      </div>
      <div class="panel" id="performance">
        <strong>Performance Metrics:</strong>
        <ul>
          <li>Load: 1.2s</li>
          <li>JS Heap: 6.1 MB</li>
          <li>FPS: 58</li>
        </ul>
      </div>
      <div class="panel" id="memory">
        <strong>Memory Usage</strong>
        <ul>
          <li>Documents: 3</li>
          <li>DOM Nodes: 2,350</li>
          <li>Listeners: 38</li>
          <li>GPU Memory: 55MB</li>
        </ul>
      </div>
      <div class="panel" id="application">
        <strong>Application</strong>
        <ul>
          <li>Local Storage: 5 keys</li>
          <li>Session Storage: 2 keys</li>
          <li>Cookies: 3</li>
        </ul>
      </div>
      <div class="panel" id="security">
        <strong>Security Overview</strong>
        <ul>
          <li>Certificate: Valid (Fake CA)</li>
          <li>Connection: Secure (TLS 1.3)</li>
        </ul>
      </div>
      <div class="panel" id="lighthouse">
        <strong>Lighthouse Results:</strong>
        <ul>
          <li>Performance: 98</li>
          <li>Accessibility: 94</li>
          <li>Best Practices: 100</li>
          <li>SEO: 92</li>
        </ul>
      </div>
    </div>
    <div class="resizer" id="resizer"></div>
    <div id="console"></div>
  </div>
  <script>
    // --- Collapsible HTML tree for fake Elements tab ---

    // Tree data format for fake HTML doc
    const fakeTree = [
      { line: '<!DOCTYPE html>', tokens: [{c:'angle',t:'&lt;!DOCTYPE html&gt;'}]},
      {
        line: '<html lang="en">',
        tokens: [
          {c:'angle',t:'&lt;'},
          {c:'tag',t:'html'},
          {c:'attr',t:' lang'}, {c:'angle',t:'='}, {c:'value',t:'"en"'},
          {c:'angle',t:'&gt;'}
        ],
        children: [
          {
            line: '  <head>',
            tokens: [{c:'angle',t:'&lt;'},
                     {c:'tag',t:'head'},
                     {c:'angle',t:'&gt;'}],
            children: [
              { line: '    <meta charset="UTF-8">', tokens: [
                {c:'angle',t:'&lt;'}, {c:'tag',t:'meta'},
                {c:'attr',t:' charset'}, {c:'angle',t:'='}, {c:'value',t:'"UTF-8"'},
                {c:'angle',t:'&gt;'}
              ]},
              { line: '    <title>Hacker-Typer Demo</title>', tokens: [
                {c:'angle',t:'&lt;'}, {c:'tag',t:'title'},
                {c:'angle',t:'&gt;'}, {t:'Hacker-Typer Demo'},
                {c:'angle',t:'&lt;/'}, {c:'tag',t:'title'},{c:'angle',t:'&gt;'}
              ]},
              { line: '    <link rel="stylesheet" href="styles.css">', tokens: [
                {c:'angle',t:'&lt;'}, {c:'tag',t:'link'},
                {c:'attr',t:' rel'}, {c:'angle',t:'='}, {c:'value',t:'"stylesheet"'},
                {c:'attr',t:' href'}, {c:'angle',t:'='}, {c:'value',t:'"styles.css"'},
                {c:'angle',t:'&gt;'}
              ]},
              { line: '    <script src="main.js"></script>', tokens: [
                {c:'angle',t:'&lt;'}, {c:'tag',t:'script'},
                {c:'attr',t:' src'}, {c:'angle',t:'='}, {c:'value',t:'"main.js"'},
                {c:'angle',t:'&gt;'}, {c:'angle',t:'&lt;/'}, {c:'tag',t:'script'}, {c:'angle',t:'&gt;'}
              ]},
            ]
          },
          {
            line: '  <body>',
            tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'body'}, {c:'angle',t:'&gt;'}],
            children: [
              {
                line: '    <header id="main-header">',
                tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'header'},
                         {c:'attr',t:' id'}, {c:'angle',t:'='}, {c:'value',t:'"main-header"'},
                         {c:'angle',t:'&gt;'}
                ],
                children: [
                  {
                    line: '      <nav>',
                    tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'nav'}, {c:'angle',t:'&gt;'}],
                    children: [
                      {
                        line: '        <ul>',
                        tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'ul'}, {c:'angle',t:'&gt;'}],
                        children: [
                          { line: '          <li><a href="#features">Features</a></li>', tokens: [
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'li'}, {c:'angle',t:'&gt;'},
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'a'},
                            {c:'attr',t:' href'}, {c:'angle',t:'='}, {c:'value',t:'"#features"'},
                            {c:'angle',t:'&gt;'},
                            {t:'Features'},
                            {c:'angle',t:'&lt;/'}, {c:'tag',t:'a'},{c:'angle',t:'&gt;'},
                            {c:'angle',t:'&lt;/'}, {c:'tag',t:'li'},{c:'angle',t:'&gt;'},
                          ]},
                          { line: '          <li><a href="#docs">Docs</a></li>', tokens: [
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'li'}, {c:'angle',t:'&gt;'},
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'a'},
                            {c:'attr',t:' href'}, {c:'angle',t:'='}, {c:'value',t:'"#docs"'},
                            {c:'angle',t:'&gt;'},
                            {t:'Docs'},
                            {c:'angle',t:'&lt;/'}, {c:'tag',t:'a'},{c:'angle',t:'&gt;'},
                            {c:'angle',t:'&lt;/'}, {c:'tag',t:'li'},{c:'angle',t:'&gt;'},
                          ]},
                          { line: '          <li><a href="#profile">Profile</a></li>', tokens: [
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'li'}, {c:'angle',t:'&gt;'},
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'a'},
                            {c:'attr',t:' href'}, {c:'angle',t:'='}, {c:'value',t:'"#profile"'},
                            {c:'angle',t:'&gt;'},
                            {t:'Profile'},
                            {c:'angle',t:'&lt;/'}, {c:'tag',t:'a'},{c:'angle',t:'&gt;'},
                            {c:'angle',t:'&lt;/'}, {c:'tag',t:'li'},{c:'angle',t:'&gt;'}
                          ]}
                        ]
                      },
                      { line: '        </ul>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'ul'},{c:'angle',t:'&gt;'}] },
                    ]
                  },
                  { line: '      </nav>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'nav'},{c:'angle',t:'&gt;'}] },
                ]
              },
              { line: '    </header>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'header'},{c:'angle',t:'&gt;'}] },
              {
                line: '    <main id="content">',
                tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'main'},
                         {c:'attr',t:' id'}, {c:'angle',t:'='}, {c:'value',t:'"content"'},
                         {c:'angle',t:'&gt;'}
                ],
                children: [
                  {
                    line: '      <section id="welcome">',
                    tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'section'},
                             {c:'attr',t:' id'}, {c:'angle',t:'='}, {c:'value',t:'"welcome"'},
                             {c:'angle',t:'&gt;'}
                    ],
                    children: [
                      { line: '        <h1>Welcome!</h1>', tokens: [
                        {c:'angle',t:'&lt;'}, {c:'tag',t:'h1'}, {c:'angle',t:'&gt;'},
                        {t:'Welcome!'},
                        {c:'angle',t:'&lt;/'}, {c:'tag',t:'h1'},{c:'angle',t:'&gt;'}
                      ]},
                      { line: '        <p>This is a demo page for Hacker-Typer clone.</p>', tokens: [
                        {c:'angle',t:'&lt;'}, {c:'tag',t:'p'}, {c:'angle',t:'&gt;'},
                        {t:'This is a demo page for Hacker-Typer clone.'},
                        {c:'angle',t:'&lt;/'}, {c:'tag',t:'p'},{c:'angle',t:'&gt;'}
                      ]},
                    ]
                  },
                  { line: '      </section>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'section'},{c:'angle',t:'&gt;'}] },
                  {
                    line: '      <section id="content-list">',
                    tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'section'},
                             {c:'attr',t:' id'}, {c:'angle',t:'='}, {c:'value',t:'"content-list"'},
                             {c:'angle',t:'&gt;'}
                    ],
                    children: [
                      {
                        line: '        <article>',
                        tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'article'}, {c:'angle',t:'&gt;'}],
                        children: [
                          { line: '          <h2>Super Secret Content</h2>', tokens: [
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'h2'}, {c:'angle',t:'&gt;'}, {t:'Super Secret Content'}, {c:'angle',t:'&lt;/'}, {c:'tag',t:'h2'},{c:'angle',t:'&gt;'}] },
                          { line: '          <pre><code>console.log("Hello, world!");</code></pre>', tokens: [
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'pre'}, {c:'angle',t:'&gt;'},
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'code'}, {c:'angle',t:'&gt;console.log("Hello, world!");&lt;/'}, {c:'tag',t:'code'}, {c:'angle',t:'&gt;'},
                            {c:'angle',t:'&lt;/'}, {c:'tag',t:'pre'}, {c:'angle',t:'&gt;'}
                          ] }
                        ]
                      },
                      { line: '        </article>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'article'},{c:'angle',t:'&gt;'}] },
                      {
                        line: '        <article>',
                        tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'article'}, {c:'angle',t:'&gt;'}],
                        children: [
                          { line: '          <h2>Another Article</h2>', tokens: [
                            {c:'angle',t:'&lt;'}, {c:'tag',t:'h2'}, {c:'angle',t:'&gt;'}, {t:'Another Article'}, {c:'angle',t:'&lt;/'}, {c:'tag',t:'h2'},{c:'angle',t:'&gt;'}] },
                          { 
                            line: '          <ul>',
                            tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'ul'}, {c:'angle',t:'&gt;'}],
                            children: [
                              { line: '            <li>Item 1</li>', tokens: [
                                {c:'angle',t:'&lt;'}, {c:'tag',t:'li'}, {c:'angle',t:'&gt;'}, {t:'Item 1'}, {c:'angle',t:'&lt;/'}, {c:'tag',t:'li'},{c:'angle',t:'&gt;'}
                              ] },
                              { line: '            <li>Item 2</li>', tokens: [
                                {c:'angle',t:'&lt;'}, {c:'tag',t:'li'}, {c:'angle',t:'&gt;'}, {t:'Item 2'}, {c:'angle',t:'&lt;/'}, {c:'tag',t:'li'},{c:'angle',t:'&gt;'}
                              ] }
                            ]
                          },
                          { line: '          </ul>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'ul'},{c:'angle',t:'&gt;'}]},
                        ]
                      },
                      { line: '        </article>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'article'},{c:'angle',t:'&gt;'}] },
                    ]
                  },
                  { line: '      </section>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'section'},{c:'angle',t:'&gt;'}] },
                ]
              },
              { line: '    </main>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'main'},{c:'angle',t:'&gt;'}] },
              {
                line: '    <footer>',
                tokens: [{c:'angle',t:'&lt;'}, {c:'tag',t:'footer'}, {c:'angle',t:'&gt;'}],
                children: [
                  { line: '      © 2025 Hacker Typer Demo', tokens: [{t:'© 2025 Hacker Typer Demo'}] }
                ]
              },
              { line: '    </footer>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'footer'},{c:'angle',t:'&gt;'}] },
            ]
          },
        ]
      },
      { line: '</html>', tokens: [{c:'angle',t:'&lt;/'}, {c:'tag',t:'html'},{c:'angle',t:'&gt;'}] }
    ];

    function genTreeHtml(nodes, level=0) {
      let out = '';
      nodes.forEach((node, idx) => {
        const hasChildren = !!node.children?.length;
        const rowId = `tree-${level}-${idx}-${Math.random().toString().slice(2,7)}`;
        out += `<div class="tree-line${hasChildren ? '' : ' no-arrow'}" data-rowid="${rowId}" data-collapsed="false" style="padding-left:${level*12}px;">` +
          (hasChildren
            ? `<span class="tree-arrow" onclick="toggleTree('${rowId}', this)">▼</span>`
            : `<span class="tree-arrow invisible"></span>`) +
          '<span>' +
          (node.tokens?.map(tok =>
            tok.c
              ? `<span class="token ${tok.c}">${tok.t}</span>`
              : tok.t
          ).join('') ?? node.line) +
          '</span></div>';
        if (hasChildren) {
          out += `<div class="tree-children" data-parentid="${rowId}">` + genTreeHtml(node.children, level+1) + '</div>';
        }
      });
      return out;
    }
    window.toggleTree = function(rowid, el) {
      const row = document.querySelector(`.tree-line[data-rowid='${rowid}']`);
      const kids = document.querySelector(`.tree-children[data-parentid='${rowid}']`);
      if (!row || !kids) return;
      const nowCollapsed = row.classList.toggle('collapsed');
      kids.style.display = nowCollapsed ? 'none' : '';
      el.textContent = nowCollapsed ? '▶' : '▼';
      setGutterLines();
    };

    function updateElementsPanel() {
      document.getElementById('elements-tree').innerHTML = genTreeHtml(fakeTree, 0);
      setGutterLines();
    }

    // Tab switching logic (left-side only!)
    document.querySelectorAll('.toolbar .tab').forEach(tab => {
      tab.addEventListener('click', () => {
        document.querySelectorAll('.toolbar .tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
        document.querySelectorAll('.left-section .panel').forEach(panel => panel.classList.remove('active'));
        const panelId = tab.getAttribute('data-panel');
        const showPanel = document.getElementById(panelId);
        if (showPanel && showPanel.parentNode.classList.contains("left-section")) showPanel.classList.add('active');
        setGutterLines();
      });
    });

    // Gutter line numbers to align with Elements code lines
    function setGutterLines() {
      const gutter = document.getElementById('gutter');
      const elements = document.getElementById('elements');
      if (!elements.classList.contains('active')) { gutter.innerHTML = ''; return; }
      const lines = Array.from(document.querySelectorAll('#elements-tree .tree-line'));
      gutter.innerHTML = lines.map((_, i) => i+1).join('<br>');
    }

    // OPTIONAL: Randomly highlight a line for realism (only on Elements)
    function pickRandomLine() {
      document.querySelectorAll('.selected-line').forEach(e => e.classList.remove('selected-line'));
      const elements = document.getElementById('elements');
      if (!elements.classList.contains('active')) return;
      const lines = Array.from(document.querySelectorAll('#elements-tree .tree-line'));
      if (lines.length) {
        const idx = Math.floor(Math.random()*lines.length);
        lines[idx].classList.add('selected-line');
      }
    }
    setInterval(pickRandomLine, 2000);

    // --- Panel Resizing ---
    const resizer = document.getElementById('resizer');
    const leftSection = document.querySelector('.left-section');
    const mainWrapper = document.querySelector('.main-wrapper');
    const consolePanel = document.getElementById('console');
    let isDragging = false;
    resizer.addEventListener('mousedown', function (e) {
      isDragging = true; resizer.classList.add('dragging');
      document.body.style.cursor = 'col-resize';
      document.body.style.userSelect = 'none';
    });
    document.addEventListener('mousemove', function (e) {
      if (!isDragging) return;
      const wrapperRect = mainWrapper.getBoundingClientRect();
      let newLeftWidth = e.clientX - wrapperRect.left;
      const minLeft = 100, maxLeft = wrapperRect.width-120;
      newLeftWidth = Math.max(minLeft, Math.min(maxLeft, newLeftWidth));
      leftSection.style.flex = 'none'; leftSection.style.width = newLeftWidth + 'px';
      const resizerWidth = resizer.offsetWidth;
      let rightWidth = wrapperRect.width - newLeftWidth - resizerWidth;
      consolePanel.style.width = Math.max(100, rightWidth) + 'px';
    });
    document.addEventListener('mouseup', function () {
      if (isDragging) {
        isDragging = false; resizer.classList.remove('dragging');
        document.body.style.cursor = ''; document.body.style.userSelect = '';
      }
    });

    // Set up fake Elements tab and gutter on load
    updateElementsPanel();
    window.addEventListener('resize', setGutterLines);
  </script>
  <!-- Hacker Typer script section (unchanged) -->
  <script src='script.js' type='text/javascript'></script>
  <script type='text/javascript'>
    Typer.speed = 3;
    Typer.file = 'kernel.txt';
    Typer.init();
  </script>
</body>
</html>
